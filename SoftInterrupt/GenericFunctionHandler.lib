http://mbed.org/users/Blaze513/code/GenericFunctionHandler/#7e4f282982a6
